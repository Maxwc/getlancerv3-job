angular.module("getlancerApp.Job.JobFlag",["ngResource","ngSanitize","satellizer","ngAnimate","ui.bootstrap","ui.bootstrap.datetimepicker","ui.router","angular-growl","google.places","angular.filter","ngCookies","angular-md5","ui.select2","http-auth-interceptor","angulartics","pascalprecht.translate","angulartics.google.analytics","tmh.dynamicLocale","ngFileUpload","infinite-scroll","ngTagsInput","angularMoment","bc.Flickity","afkl.lazyImage","angular-loading-bar","ngAnimate","ngMessages","slugifier"]),angular.module("getlancerApp.Job.JobFlag").controller("JobFlagController",function($scope,$rootScope,$window,$stateParams,$filter,md5,$state,$timeout,$uibModal,$uibModalStack,flagCategories,$cookies,flash){$rootScope.closemodel=function(){$state.go("jobs_view",{id:$state.params.id}),$uibModalStack.dismissAll()},$scope.jobReport=function(){$scope.modalInstance=$uibModal.open({templateUrl:"scripts/plugins/Job/JobFlag/views/default/job_report.html",animation:!1,controller:function($scope,$rootScope,$window,$stateParams,$filter,md5,$state,Upload,$timeout,$uibModal,$uibModalStack,flagCategories,JobsReportFactory,flash){$scope.flag=$scope.flags=[],$scope.flagCategory=function(){var params={};params["class"]="Job",flagCategories.get(params,function(response){$scope.flag=response.data})},$scope.flagCategory(),$scope.flag_button=!1,$scope.submit=function($valid){if($valid){$scope.flag_button=!0;var post_params={user_id:$rootScope.user.id,foreign_id:$state.params.id,"class":"Job",flag_category_id:$scope.flags.flag_category_id,message:$scope.flags.message},flashMessage="";JobsReportFactory.post(post_params,function(response){$scope.response=response,0===$scope.response.error.code?($scope.flags={},$rootScope.closemodel(),flashMessage=$filter("translate")("Report posted successfully."),flash.set(flashMessage,"success",!1),job()):(flashMessage=$filter("translate")($scope.response.error.message),flash.set(flashMessage,"error",!1),$scope.flag_button=!1)})}}},size:"lg"})}}),angular.module("getlancerApp.Job.JobFlag").directive("jobViewFlag",function($uibModal){return{restrict:"EA",replace:!0,templateUrl:"scripts/plugins/Job/JobFlag/views/default/job_view_flag.html",link:function(scope,element,attr){scope.flag={},scope.FlagModel=function(isvalid){scope.modalInstance=$uibModal.open({templateUrl:"scripts/plugins/Job/JobFlag/views/default/job_report.html",backdrop:"true",controller:"JobFlagController"})}}}}),angular.module("getlancerApp.Job.JobFlag").factory("FlagsFactory",["$resource",function($resource){return $resource("/api/v1/flags",{},{create:{method:"POST"}})}]).factory("FlagCategoriesFactory",["$resource",function($resource){return $resource("/api/v1/flag_categories",{},{get:{method:"GET"}})}]),angular.module("getlancerApp.Job.JobFlag").run(["$templateCache",function($templateCache){"use strict";$templateCache.put("scripts/plugins/Job/JobFlag/views/default/job_report.html",'<div class="section navbar-default"> <div> <form class="form-horizontal adminpg-form" name="applyJobReport" role="form" novalidate> <div class="row clearfix"> <div class="col-sm-12"> <div class="section navbar-default"> <div class="panel no-mar" ng-if="!is_flag"> <div class="modal-header sep-bot"> <button type="button" class="close" data-dismiss="modal" ng-click="closemodel()">&times;</button> <h3 class="no-mar">{{\'Report\'|translate}}</h3> </div> <div class="panel-heading"> <div class=""> <div class="form-group"> <div class="col-sm-4"> <label for="flagCategory" class="control-label">{{\'Flag Category\'|translate}} <span class="error">*</span> </label> </div> <div class="col-sm-8"> <div class="frm-select"> <select name="flagCategory" ng-model="flags.flag_category_id" class="form-control" ng-required="true"> <option value="{{flags.id}}">{{\'Please Select\'|translate}}</option> <option value="{{flags.id}}" ng-repeat="flags in flag">{{flags.name}}</option> </select> </div> <span class="error" ng-show="(applyJobReport.$submitted || applyJobReport.flagCategory.$touched) && (applyJobReport.flagCategory.$pristine || applyJobReport.flagCategory.$invalid) && (applyJobReport.flagCategory.$error.required)">{{\'Flag category is required\'| translate}} </span> </div> </div> <div class="form-group no-mar"> <div class="col-sm-4"> <label for="message" class="control-label">{{\'Message\'|translate}}<span class="error">*</span></label> </div> <div class="col-sm-8"> <textarea type="text" rows="3" name="inputMessage" ng-model="flags.message" class="form-control" ng-required="true"></textarea> <span class="error" ng-show="(applyJobReport.$submitted || applyJobReport.inputMessage.$touched) && (applyJobReport.inputMessage.$pristine || applyJobReport.inputMessage.$invalid) && (applyJobReport.inputMessage.$error.required)"> {{\'Required\'| translate }} </span> </div> </div> </div> </div> <div class="space text-center"> <h3 ng-if="is_flag"> {{\'Already Reported\'| translate }} </h3> </div> </div> <div class="space text-center"> <h3 ng-if="is_flag"> {{\'Already Reported\'| translate }} </h3> </div> <div class="panel-heading"> <div class="form-group" ng-if="!is_flag"> <div class="col-sm-offset-4 col-sm-8"> <button type="submit" ng-show="flag_button" class="btn btn-primary" disabled>{{\'Submit\'|translate}}</button> <button type="submit" class="btn btn-primary" ng-click="submit(applyJobReport.$valid)" ng-show="!flag_button"> {{\'Submit\'|translate}}</button> <button class="btn btn-danger" ng-click="closemodel()">{{\'Cancel\'|translate}}</button> </div> </div> <div class="form-group" ng-if="is_flag"> <div class="text-center"> <button class="btn btn-danger" ng-click="closemodel()">{{\'Cancel\'|translate}}</button> </div> </div> </div> </div> </div> </div> </form> </div> </div>'),$templateCache.put("scripts/plugins/Job/JobFlag/views/default/job_view_flag.html",'<span class="report cursor report-link" ng-click="jobReport()" ng-if="(job_view.user_id != user.id && isAuth && settings.SITE_ENABLED_PLUGINS.indexOf(\'Job/JobFlag\') > -1)" ng-controller="JobFlagController">{{\'Report this Job?\'|translate}}</span>')}]);